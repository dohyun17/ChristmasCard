{% extends "base.html" %}

{% block content %}
<div class="christmas-container">
    <div class="development-notice">
        <p>âš ï¸ í˜„ì¬ ì´ ì• í”Œë¦¬ì¼€ì´ì…˜ì€ ê°œë°œ ì¤‘ì…ë‹ˆë‹¤. ì¼ë¶€ ê¸°ëŠ¥ì´ ë¶ˆì™„ì „í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
    </div>

    <h1 class="christmas-title">ğŸ„ í¬ë¦¬ìŠ¤ë§ˆìŠ¤ í¸ì§€í•¨ ğŸ„</h1>

    <div id="countdown">
        <h2>í¬ë¦¬ìŠ¤ë§ˆìŠ¤ê¹Œì§€ ë‚¨ì€ ì‹œê°„</h2>
        <div id="timer">
            <span id="days">00</span>ì¼ 
            <span id="hours">00</span>ì‹œê°„ 
            <span id="minutes">00</span>ë¶„ 
            <span id="seconds">00</span>ì´ˆ
        </div>
    </div>

    <div class="button-container">
        <a href="{{ url_for('main.write_letter') }}" class="christmas-button">
            âœ‰ï¸ í¸ì§€ ì“°ê¸°
        </a>
        <a href="{{ url_for('main.letter_list') }}" class="christmas-button">
            ğŸ“œ í¸ì§€ ëª©ë¡
        </a>
    </div>
</div>

<script>
    function createSnowflake() {
        const snowflake = document.createElement('div');
        snowflake.classList.add('snowflake');
        snowflake.innerHTML = 'â„ï¸';
        snowflake.style.position = 'fixed';
        snowflake.style.left = Math.random() * window.innerWidth + 'px';
        snowflake.style.animationDuration = (Math.random() * 3 + 2) + 's';
        snowflake.style.opacity = Math.random();
        document.body.appendChild(snowflake);

        snowflake.animate([
            { transform: 'translateY(-100vh)' }
        ], {
            duration: 5000,
            iterations: 1
        });

        setTimeout(() => {
            snowflake.remove();
        }, 5000);
    }

    setInterval(createSnowflake, 300);

    const christmasDate = new Date("2024-12-25T00:00:00").getTime();

    const countdownFunction = setInterval(() => {
        const now = new Date().getTime();
        
        const distance = christmasDate - now;

        const days = Math.floor(distance / (1000 * 60 * 60 * 24));
        const hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
        const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
        const seconds = Math.floor((distance % (1000 * 60)) / 1000);

        document.getElementById("days").innerText = days;
        document.getElementById("hours").innerText = hours;
        document.getElementById("minutes").innerText = minutes;
        document.getElementById("seconds").innerText = seconds;

        if (distance < 0) {
            clearInterval(countdownFunction);
            document.getElementById("timer").innerHTML = "ğŸ„ í¬ë¦¬ìŠ¤ë§ˆìŠ¤ ì¶•í•˜í•©ë‹ˆë‹¤! ğŸ„";
        }
    }, 1000);

    document.addEventListener('DOMContentLoaded', function() {
        const developmentNotice = document.querySelector('.development-notice');
        
        // 3ì´ˆ í›„ í˜ì´ë“œ ì•„ì›ƒ
        setTimeout(() => {
            developmentNotice.style.transition = 'opacity 1s';
            developmentNotice.style.opacity = '0';
            
            // 1ì´ˆ í›„ ì™„ì „íˆ ì œê±°
            setTimeout(() => {
                developmentNotice.style.display = 'none';
            }, 1000);
        }, 3000); // ì—¬ê¸°ì„œ ì‹œê°„ì„ ì¡°ì •í•©ë‹ˆë‹¤.
    });
</script>
{% endblock %}
