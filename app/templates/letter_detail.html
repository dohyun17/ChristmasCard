{% extends "base.html" %}

{% block content %}
<div class="christmas-container">
    <h1 class="christmas-title">âœ‰ï¸ {{ letter.sender }}ì˜ í¸ì§€ âœ‰ï¸</h1>
    
    <audio id="christmas-audio" autoplay loop>
        <source src="{{ url_for('static', filename='christmas_music.mp3') }}" type="audio/mpeg">
        Your browser does not support the audio element.
    </audio>

    <p><strong>í¸ì§€ ë‚´ìš©:</strong></p>
    <p class="letter-content">{{ letter.content }}</p>

    {% if letter.file %}
        <div class="file-preview">
            <p><strong>ì²¨ë¶€ íŒŒì¼:</strong> {{ letter.file }}</p>
            {% set file_extension = letter.file.split('.')[-1].lower() %}
            {% if file_extension in ['jpg', 'jpeg', 'png', 'gif'] %}
                <img src="{{ url_for('static', filename='uploads/' + letter.file) }}" alt="ì²¨ë¶€ ì´ë¯¸ì§€" class="attached-image">
            {% elif file_extension in ['pdf'] %}
                <embed src="{{ url_for('static', filename='uploads/' + letter.file) }}" type="application/pdf" width="100%" height="600px" />
            {% endif %}
            <a href="{{ url_for('static', filename='uploads/' + letter.file) }}" class="christmas-button" download>íŒŒì¼ ë‹¤ìš´ë¡œë“œ</a>
        </div>
    {% endif %}

    <div class="button-group">
        <a href="{{ url_for('edit_letter', id=letter.id) }}" class="christmas-button">âœï¸ í¸ì§€ ìˆ˜ì •í•˜ê¸°</a>
        <form action="{{ url_for('delete_letter', id=letter.id) }}" method="POST" style="display: inline;">
            <button type="submit" class="christmas-button delete-button" onclick="return confirm('ì •ë§ë¡œ ì´ í¸ì§€ë¥¼ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?');">ğŸ—‘ï¸ í¸ì§€ ì‚­ì œí•˜ê¸°</button>
        </form>
        <a href="{{ url_for('letter_list') }}" class="christmas-button">ğŸ“œ í¸ì§€ ëª©ë¡ìœ¼ë¡œ ëŒì•„ê°€ê¸°</a>
    </div>
</div>
{% endblock %}
