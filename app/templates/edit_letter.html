{% extends "base.html" %}

{% block content %}
<div class="christmas-container">
    <h1 class="christmas-title">🖊️ 편지 수정하기 🖊️</h1>
    
    <form method="POST" enctype="multipart/form-data" class="christmas-form">
        <div class="form-group">
            <label for="sender">보내는 사람:</label>
            <input type="text" id="sender" name="sender" value="{{ letter.sender }}" required>
        </div>
        
        <div class="form-group">
            <label for="content">편지 내용:</label>
            <textarea id="content" name="content" rows="10" required>{{ letter.content }}</textarea>
        </div>
        
        {% if letter.file %}
        <div class="form-group">
            <p>현재 첨부 파일: {{ letter.file }}</p>
            <label for="file">새 파일 첨부 (선택사항):</label>
            <input type="file" id="file" name="file">
        </div>
        {% else %}
        <div class="form-group">
            <label for="file">파일 첨부 (선택사항):</label>
            <input type="file" id="file" name="file">
        </div>
        {% endif %}
        
        <button type="submit" class="christmas-button">🎄 편지 수정하기 🎄</button>
    </form>
    
    <a href="{{ url_for('letter_detail', id=letter.id) }}" class="christmas-button">🔙 돌아가기</a>
</div>

<script>
    // 눈 내리는 효과 (write_letter.html과 동일)
    function createSnowflake() {
        const snowflake = document.createElement('div');
        snowflake.classList.add('snowflake');
        snowflake.innerHTML = '❄️';
        const leftPosition = Math.random() * window.innerWidth + 'px';
        snowflake.style.left = leftPosition;
        snowflake.style.animationDuration = Math.random() * 3 + 2 + 's'; // 2-5초
        snowflake.style.opacity = Math.random();
        snowflake.style.fontSize = Math.random() * 10 + 10 + 'px'; // 10-20px
        document.body.appendChild(snowflake);
        
        // 애니메이션이 끝나면 요소 제거
        snowflake.addEventListener('animationend', () => {
            snowflake.remove();
        });
    }

    setInterval(createSnowflake, 100);
</script>
{% endblock %}
