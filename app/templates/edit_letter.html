{% extends "base.html" %}

{% block content %}
<div class="christmas-container">
    <h1 class="christmas-title">ğŸ–Šï¸ í¸ì§€ ìˆ˜ì •í•˜ê¸° ğŸ–Šï¸</h1>
    
    <form method="POST" enctype="multipart/form-data" class="christmas-form">
        <div class="form-group">
            <label for="sender">ë³´ë‚´ëŠ” ì‚¬ëŒ:</label>
            <input type="text" id="sender" name="sender" value="{{ letter.sender }}" required>
        </div>
        
        <div class="form-group">
            <label for="content">í¸ì§€ ë‚´ìš©:</label>
            <textarea id="content" name="content" rows="10" required>{{ letter.content }}</textarea>
        </div>
        
        {% if letter.file %}
        <div class="form-group">
            <p>í˜„ì¬ ì²¨ë¶€ íŒŒì¼: {{ letter.file }}</p>
            <label for="file">ìƒˆ íŒŒì¼ ì²¨ë¶€ (ì„ íƒì‚¬í•­):</label>
            <input type="file" id="file" name="file">
        </div>
        {% else %}
        <div class="form-group">
            <label for="file">íŒŒì¼ ì²¨ë¶€ (ì„ íƒì‚¬í•­):</label>
            <input type="file" id="file" name="file">
        </div>
        {% endif %}
        
        <button type="submit" class="christmas-button">ğŸ„ í¸ì§€ ìˆ˜ì •í•˜ê¸° ğŸ„</button>
    </form>
    
    <a href="{{ url_for('letter_detail', id=letter.id) }}" class="christmas-button">ğŸ”™ ëŒì•„ê°€ê¸°</a>
</div>

<script>
    // ëˆˆ ë‚´ë¦¬ëŠ” íš¨ê³¼ (write_letter.htmlê³¼ ë™ì¼)
    function createSnowflake() {
        const snowflake = document.createElement('div');
        snowflake.classList.add('snowflake');
        snowflake.innerHTML = 'â„ï¸';
        const leftPosition = Math.random() * window.innerWidth + 'px';
        snowflake.style.left = leftPosition;
        snowflake.style.animationDuration = Math.random() * 3 + 2 + 's'; // 2-5ì´ˆ
        snowflake.style.opacity = Math.random();
        snowflake.style.fontSize = Math.random() * 10 + 10 + 'px'; // 10-20px
        document.body.appendChild(snowflake);
        
        // ì• ë‹ˆë©”ì´ì…˜ì´ ëë‚˜ë©´ ìš”ì†Œ ì œê±°
        snowflake.addEventListener('animationend', () => {
            snowflake.remove();
        });
    }

    setInterval(createSnowflake, 100);
</script>
{% endblock %}
